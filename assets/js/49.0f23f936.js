(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{415:function(t,e,s){"use strict";s.r(e);var l=s(42),i=Object(l.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"跨域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),s("h2",{attrs:{id:"同源策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同源策略"}},[t._v("#")]),t._v(" 同源策略")]),t._v(" "),s("p",[t._v('同源策略是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到 XSS、CSFR 等攻击。所谓同源是指"协议+域名+端口"三者相同，即便两个不同的域名指向同一个 ip 地址，也非同源。')]),t._v(" "),s("p",[t._v("同源策略限制以下几种行为：")]),t._v(" "),s("ul",[s("li",[t._v("Cookie、LocalStorage 和 IndexDB 无法读取")]),t._v(" "),s("li",[t._v("DOM 和 Js 对象无法获得")]),t._v(" "),s("li",[t._v("AJAX 请求不能发送")])]),t._v(" "),s("h2",{attrs:{id:"跨域处理方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域处理方案"}},[t._v("#")]),t._v(" 跨域处理方案")]),t._v(" "),s("ul",[s("li",[t._v("Jsonp：网页通过动态添加一个 script 元素，向服务器请求数据; 服务器收到请求后，将数据放在一个指定名字的回调函数里传回来。但只支持 get 请求。")]),t._v(" "),s("li",[t._v("设置 document.domain: 此方案仅限主域相同，子域不同的跨域应用场景")]),t._v(" "),s("li",[t._v("通过更改中间页面的 hash 值或是 window.name 属性。")]),t._v(" "),s("li",[t._v("PostMessage 跨域 API")]),t._v(" "),s("li",[t._v("设置跨域资源共享（CORS），需要浏览器和服务器同时支持。\n"),s("ul",[s("li",[t._v("Access-Control-Allow-Origin")]),t._v(" "),s("li",[t._v("Access-Control-Allow-Methods")]),t._v(" "),s("li",[t._v("Access-Control-Allow-Headers")]),t._v(" "),s("li",[t._v("Access-Control-Allow-Credentials")]),t._v(" "),s("li",[t._v("Access-Control-Max-Age")])])]),t._v(" "),s("li",[t._v("Nginx 反向代理")]),t._v(" "),s("li",[t._v("Node 中间件代理")]),t._v(" "),s("li",[t._v("Websock：因为有了 Origin（请求源）这个字段，所以 WebSocket 才没有实行同源政策。因为服务器可以根据这个字段，判断是否许可本次通信。")])]),t._v(" "),s("h2",{attrs:{id:"跨域未携带-cookie-可能的原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域未携带-cookie-可能的原因"}},[t._v("#")]),t._v(" 跨域未携带 cookie 可能的原因")]),t._v(" "),s("ul",[s("li",[t._v("未设置 withCredentials：axios, $.ajax, xhr 未设置 withCredentials 的请求头")]),t._v(" "),s("li",[t._v("CORS 的 Access-Control-Allow-Credentials 未设置成 true")])])])}),[],!1,null,null,null);e.default=i.exports}}]);