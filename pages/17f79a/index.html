<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Html | AGAN</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/Agan-blog/img/favicon.ico">
    <meta name="description" content="悠悠的古城中 听美人奏琴声,长枪刺破云霞 放下一生牵挂,舍命奉陪 抵不过天公不作美,遇见即是上上签 纵使结局不如意">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    
    <link rel="preload" href="/Agan-blog/assets/css/0.styles.1674594c.css" as="style"><link rel="preload" href="/Agan-blog/assets/js/app.3c2129f2.js" as="script"><link rel="preload" href="/Agan-blog/assets/js/2.0d86c6dd.js" as="script"><link rel="preload" href="/Agan-blog/assets/js/51.947892ad.js" as="script"><link rel="prefetch" href="/Agan-blog/assets/js/10.7078a18d.js"><link rel="prefetch" href="/Agan-blog/assets/js/11.d88f4ce5.js"><link rel="prefetch" href="/Agan-blog/assets/js/12.9421e68f.js"><link rel="prefetch" href="/Agan-blog/assets/js/13.3a1a129a.js"><link rel="prefetch" href="/Agan-blog/assets/js/14.5937ebf2.js"><link rel="prefetch" href="/Agan-blog/assets/js/15.4936127b.js"><link rel="prefetch" href="/Agan-blog/assets/js/16.12136193.js"><link rel="prefetch" href="/Agan-blog/assets/js/17.86fdf534.js"><link rel="prefetch" href="/Agan-blog/assets/js/18.b8319bf1.js"><link rel="prefetch" href="/Agan-blog/assets/js/19.9752074d.js"><link rel="prefetch" href="/Agan-blog/assets/js/20.5410609d.js"><link rel="prefetch" href="/Agan-blog/assets/js/21.49488984.js"><link rel="prefetch" href="/Agan-blog/assets/js/22.b60a0706.js"><link rel="prefetch" href="/Agan-blog/assets/js/23.898fc863.js"><link rel="prefetch" href="/Agan-blog/assets/js/24.fda9bf26.js"><link rel="prefetch" href="/Agan-blog/assets/js/25.895b4cba.js"><link rel="prefetch" href="/Agan-blog/assets/js/26.8dac8683.js"><link rel="prefetch" href="/Agan-blog/assets/js/27.683d24dd.js"><link rel="prefetch" href="/Agan-blog/assets/js/28.efd2334c.js"><link rel="prefetch" href="/Agan-blog/assets/js/29.e77fea17.js"><link rel="prefetch" href="/Agan-blog/assets/js/3.1a398d3a.js"><link rel="prefetch" href="/Agan-blog/assets/js/30.561fc879.js"><link rel="prefetch" href="/Agan-blog/assets/js/31.a4b0f822.js"><link rel="prefetch" href="/Agan-blog/assets/js/32.140f8495.js"><link rel="prefetch" href="/Agan-blog/assets/js/33.078f355e.js"><link rel="prefetch" href="/Agan-blog/assets/js/34.7921c113.js"><link rel="prefetch" href="/Agan-blog/assets/js/35.85b6395d.js"><link rel="prefetch" href="/Agan-blog/assets/js/36.56a6bc9a.js"><link rel="prefetch" href="/Agan-blog/assets/js/37.f94705be.js"><link rel="prefetch" href="/Agan-blog/assets/js/38.ede5f11d.js"><link rel="prefetch" href="/Agan-blog/assets/js/39.440a48e8.js"><link rel="prefetch" href="/Agan-blog/assets/js/4.722a81fa.js"><link rel="prefetch" href="/Agan-blog/assets/js/40.59b0244b.js"><link rel="prefetch" href="/Agan-blog/assets/js/41.c5c79df1.js"><link rel="prefetch" href="/Agan-blog/assets/js/42.b32cc047.js"><link rel="prefetch" href="/Agan-blog/assets/js/43.dcf4204c.js"><link rel="prefetch" href="/Agan-blog/assets/js/44.c3669e78.js"><link rel="prefetch" href="/Agan-blog/assets/js/45.b8c83895.js"><link rel="prefetch" href="/Agan-blog/assets/js/46.d5e11c38.js"><link rel="prefetch" href="/Agan-blog/assets/js/47.6e8e6a17.js"><link rel="prefetch" href="/Agan-blog/assets/js/48.5feb8558.js"><link rel="prefetch" href="/Agan-blog/assets/js/49.0f23f936.js"><link rel="prefetch" href="/Agan-blog/assets/js/5.e1e9fbee.js"><link rel="prefetch" href="/Agan-blog/assets/js/50.3817003e.js"><link rel="prefetch" href="/Agan-blog/assets/js/52.b3d8699f.js"><link rel="prefetch" href="/Agan-blog/assets/js/53.a56229c5.js"><link rel="prefetch" href="/Agan-blog/assets/js/54.a062f12e.js"><link rel="prefetch" href="/Agan-blog/assets/js/55.49595207.js"><link rel="prefetch" href="/Agan-blog/assets/js/56.7a3249d2.js"><link rel="prefetch" href="/Agan-blog/assets/js/57.6f4387d7.js"><link rel="prefetch" href="/Agan-blog/assets/js/58.0cbc79f7.js"><link rel="prefetch" href="/Agan-blog/assets/js/59.2e2f114c.js"><link rel="prefetch" href="/Agan-blog/assets/js/6.0c2419ec.js"><link rel="prefetch" href="/Agan-blog/assets/js/60.cbae4a83.js"><link rel="prefetch" href="/Agan-blog/assets/js/61.6e70f846.js"><link rel="prefetch" href="/Agan-blog/assets/js/62.f21a405e.js"><link rel="prefetch" href="/Agan-blog/assets/js/63.db589b0d.js"><link rel="prefetch" href="/Agan-blog/assets/js/64.1f95cef9.js"><link rel="prefetch" href="/Agan-blog/assets/js/65.f1408ec1.js"><link rel="prefetch" href="/Agan-blog/assets/js/66.e713aa05.js"><link rel="prefetch" href="/Agan-blog/assets/js/67.3c617fa4.js"><link rel="prefetch" href="/Agan-blog/assets/js/68.d21e34d6.js"><link rel="prefetch" href="/Agan-blog/assets/js/69.31b24de4.js"><link rel="prefetch" href="/Agan-blog/assets/js/7.accc422d.js"><link rel="prefetch" href="/Agan-blog/assets/js/70.cd4f2a03.js"><link rel="prefetch" href="/Agan-blog/assets/js/71.89266fef.js"><link rel="prefetch" href="/Agan-blog/assets/js/72.3307e935.js"><link rel="prefetch" href="/Agan-blog/assets/js/73.5b1aedd1.js"><link rel="prefetch" href="/Agan-blog/assets/js/74.c578d90d.js"><link rel="prefetch" href="/Agan-blog/assets/js/75.65c4c504.js"><link rel="prefetch" href="/Agan-blog/assets/js/76.563a3e33.js"><link rel="prefetch" href="/Agan-blog/assets/js/77.9a401ea8.js"><link rel="prefetch" href="/Agan-blog/assets/js/78.8968edd9.js"><link rel="prefetch" href="/Agan-blog/assets/js/79.e6bc297c.js"><link rel="prefetch" href="/Agan-blog/assets/js/8.977aa7f9.js"><link rel="prefetch" href="/Agan-blog/assets/js/80.803f5cd2.js"><link rel="prefetch" href="/Agan-blog/assets/js/81.0344aa07.js"><link rel="prefetch" href="/Agan-blog/assets/js/82.e830d944.js"><link rel="prefetch" href="/Agan-blog/assets/js/83.9c7bd0a3.js"><link rel="prefetch" href="/Agan-blog/assets/js/84.1d3691d3.js"><link rel="prefetch" href="/Agan-blog/assets/js/85.d0e0eec9.js"><link rel="prefetch" href="/Agan-blog/assets/js/86.7a9b98f1.js"><link rel="prefetch" href="/Agan-blog/assets/js/87.989e4a6a.js"><link rel="prefetch" href="/Agan-blog/assets/js/88.96fb2e84.js"><link rel="prefetch" href="/Agan-blog/assets/js/89.63cf36b0.js"><link rel="prefetch" href="/Agan-blog/assets/js/9.55a60885.js"><link rel="prefetch" href="/Agan-blog/assets/js/90.19849981.js"><link rel="prefetch" href="/Agan-blog/assets/js/91.950b7c76.js"><link rel="prefetch" href="/Agan-blog/assets/js/92.5c148052.js"><link rel="prefetch" href="/Agan-blog/assets/js/93.e926e177.js">
    <link rel="stylesheet" href="/Agan-blog/assets/css/0.styles.1674594c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="ag-container is-page" data-v-1895eed2><div class="ag-header" data-v-312fb2c6 data-v-1895eed2><nav class="ag-nav" data-v-312fb2c6><span data-v-312fb2c6><a href="/Agan-blog/" class="router-link-active" data-v-312fb2c6>首页</a></span><span data-v-312fb2c6><a href="/Agan-blog/pages/d67b9d/" data-v-312fb2c6>设计</a></span><span data-v-312fb2c6><a href="/Agan-blog/pages/8143cc480faf9a11/" data-v-312fb2c6>前端</a></span><span data-v-312fb2c6><a href="/Agan-blog/pages/fe171a/" data-v-312fb2c6>随笔</a></span><span data-v-312fb2c6><a href="/Agan-blog/pages/beb6c0bd8a66cea6" data-v-312fb2c6>收藏夹</a></span><span data-v-312fb2c6><a data-v-312fb2c6>
          其他
          </a></span></nav> <div class="ag-toggle-mode theme-mode" data-v-704e114c data-v-312fb2c6><div class="current-mode" data-v-704e114c>
    自动
  </div> <ul class="select-mode" style="display:none;" data-v-704e114c><li class="light" data-v-704e114c>
      浅色
    </li><li class="dark" data-v-704e114c>
      暗色
    </li><li class="is-active auto" data-v-704e114c>
      自动
    </li></ul></div></div> <div class="ag-body" data-v-1895eed2><div class="ag-slogn" data-v-92e64100 data-v-1895eed2><h1 data-v-92e64100></h1> <h4 data-v-92e64100></h4></div> <div class="ag-page" data-v-a14a39de data-v-1895eed2 data-v-1895eed2><div class="ag-slide-panel ag-side" data-v-302c62e6 data-v-a14a39de><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      计算机相关
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/772077/" data-v-b37a5190>计算机浏览器相关
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/014c11/" data-v-b37a5190>在输入URL之后，浏览器上做了什么
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/392a60/" data-v-b37a5190>「前端进阶必备」深入理解现代浏览器
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/0ae1a6/" data-v-b37a5190> 重排重绘为什么会影响渲染，如何避免
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/450cf0/" data-v-b37a5190>js css 顺序对前端优化影响
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/12cf5b/" data-v-b37a5190> 缓存机制
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/4cde03/" data-v-b37a5190>HTTP, HTTPS, HTTP2 的区别和联系
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/3fb3b0/" data-v-b37a5190>跨域问题
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/0d4c51/" data-v-b37a5190>事件循环
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      HTML
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/17f79a/" aria-current="page" class="router-link-exact-active router-link-active" data-v-b37a5190> Html
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      CSS
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/2cf44b/" data-v-b37a5190> CSS
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      JS
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/85e0ff/" data-v-b37a5190> Js
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      框架
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/07183b/" data-v-b37a5190> Webpack
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/4a6389/" data-v-b37a5190> Vue
              </a></div></li><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/bafb86/" data-v-b37a5190> React
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      Node
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/c2c1d1/" data-v-b37a5190> Node
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-link" data-v-b37a5190 data-v-302c62e6><a href="/Agan-blog/pages/c15f88/" data-v-b37a5190>性能优化
              </a></div></div><div class="slide-item" data-v-302c62e6><div class="slide-group" data-v-b37a5190 data-v-302c62e6><div class="slide-title" data-v-b37a5190>
      算法
    </div> <ul class="slide-menus" style="display:none;" data-v-b37a5190 data-v-b37a5190><li class="slide-menu" data-v-b37a5190><div class="slide-link" data-v-b37a5190 data-v-b37a5190><a href="/Agan-blog/pages/6f88c1/" data-v-b37a5190> 算法
              </a></div></li></ul></div></div><div class="slide-item" data-v-302c62e6><div class="slide-link" data-v-b37a5190 data-v-302c62e6><a href="/Agan-blog/pages/7d2fc9/" data-v-b37a5190>一些概念
              </a></div></div></div> <div class="ag-main" data-v-a14a39de><div class="ag-content" data-v-a14a39de><div class="content__default" data-v-a14a39de data-v-a14a39de><h1 id="html"><a href="#html" class="header-anchor">#</a> Html</h1> <p>[TOC]</p> <h2 id="_1-语义化"><a href="#_1-语义化" class="header-anchor">#</a> 1 语义化</h2> <p>语义化：用合理、正确的标签来展示内容，比如 h1~h6 定义标题。</p> <p>优点：</p> <ul><li>易于用户阅读，样式丢失的时候能让页面呈现清晰的结构。</li> <li>有利于 SEO，搜索引擎根据标签来确定上下文和各个关键字的权重。</li> <li>方便其他设备解析，如盲人阅读器根据语义渲染网页</li> <li>有利于开发和维护，语义化更具可读性，代码更好维护，与 CSS3 关系更和谐。</li></ul> <p>HTML5 语义化标签：article nav（导航） aside section（节，段） header footer address 等</p> <h2 id="_2-事件捕获流-冒泡流和事件委托"><a href="#_2-事件捕获流-冒泡流和事件委托" class="header-anchor">#</a> 2 事件捕获流，冒泡流和事件委托</h2> <ul><li>事件流描述的是从页面中接收事件的顺序。</li> <li>类型
<ul><li>事件冒泡流：事件的传播是从最特定的事件目标到最不特定的事件目标。即从 DOM 树的叶子到根。（IE）</li> <li>事件捕获流：事件的传播是从最不特定的事件目标到最特定的事件目标。即从 DOM 树的根到叶子。（网景公司）</li></ul></li> <li>DOM 标准规定事件流包括三个阶段：事件捕获阶段、处于目标阶段和事件冒泡阶段。
<ul><li>事件捕获阶段：实际目标（）在捕获阶段不会接收事件。也就是在捕获阶段，事件从(window -&gt;)document 到再到就停止了。</li> <li>处于目标阶段：事件在上发生并处理。但是事件处理会被看成是冒泡阶段的一部分。</li> <li>冒泡阶段：事件又传播回文档。</li></ul></li> <li>事件委托又叫事件代理，是根据事件冒泡流，将本应该绑定在多个元素上的事件绑定在他们的祖先元素上，尤其在动态添加子元素的时候，可以非常方便的提高程序性能，减小内存空间</li></ul> <p><em><strong>注意以下事件不支持冒泡</strong></em>：</p> <ul><li>blur</li> <li>focus</li> <li>load</li> <li>unload</li> <li>以及自定义的事件。</li></ul> <p>原因是在于：这些事件仅发生于自身上，而它的任何父节点上的事件都不会产生，所有不会冒泡</p> <p>如何阻止事件捕获或冒泡</p> <ul><li>阻止冒泡
<ul><li><code>return false</code>也可以阻止冒泡。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//w3c的方法是</span>
e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">return</span> <span class="token boolean">false</span>。

window<span class="token punctuation">.</span>e<span class="token punctuation">.</span>cancelBubble<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// IE</span>
<span class="token comment">//综合</span>
window<span class="token punctuation">.</span>event<span class="token operator">?</span> window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>阻止捕获</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止捕获和其他事件</span>
</code></pre></div><ul><li>阻止默认事件: 事件处理过程中，不阻击事件冒泡，但阻击默认行为<br>
w3c 的方法是 e.preventDefault()，IE 则是使用 e.returnValue = false<br>
return false 也能阻止默认行为。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">stopDefault</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//阻止默认浏览器动作(W3C)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">//IE中阻止函数器默认动作的方式</span>
  <span class="token keyword">else</span> window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-盒子模型"><a href="#_3-盒子模型" class="header-anchor">#</a> 3 盒子模型</h2> <p>一个盒子模型可分成 margin(外边距), border(边框), padding(内边距), content(内容)， 四部分组成。</p> <p>盒子模型分为标准盒子模型和 IE 盒子模型。区别是:</p> <ul><li>标准盒子模型中，width 和 height 指的是内容区域的宽度和高度。增加内边距、边框和外边距不会影响内容区域的尺寸，但是会增加元素框的总尺寸。</li> <li>IE 盒子模型中，width 和 height 指的是内容区域+padding+border 的宽度和高度。</li> <li>box-sizing: content-box|border-box|inherit;
<ul><li>content-box: 使用标准盒子模型</li> <li>border-box: 使用 IE 盒子模型</li></ul></li></ul> <h2 id="_4-bfc"><a href="#_4-bfc" class="header-anchor">#</a> 4 BFC</h2> <p>块级格式化上下文 (Block Fromatting Context)</p> <p>为了便于理解，我们换一种方式来重新定义 BFC。一个 HTML 元素要创建 BFC，则满足下列的任意一个或多个条件即可：</p> <ul><li>body 元素</li> <li>float 的值不是 none。</li> <li>position 的值不是 static 或者 relative。</li> <li>display 的值是 inline-block、table-cell、flex、table-caption 或者 inline-flex</li> <li>overflow 的值不是 visible</li></ul> <p>BFC 是一个独立的布局环境，其中的元素布局是不受外界的影响，并且在一个 BFC 中，块盒与行盒（行盒由一行中所有的内联元素所组成）都会垂直的沿着其父元素的边框排列。</p> <p>特性:</p> <ul><li>内部的 Box 会在垂直方向，一个接一个地放置。</li> <li>Box 垂直方向的距离由 margin 决定。属于同一个 BFC 的两个相邻 Box 的 margin 会发生重叠 （margin 坍塌）</li> <li>每个元素的 margin box 的左边， 与包含块 border box 的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。</li> <li>BFC 的区域不会与 float box 重叠。</li> <li>计算 BFC 的高度时，浮动元素也参与计算</li> <li>BFC 就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li></ul> <h2 id="_5-script-异步加载和-jsonp"><a href="#_5-script-异步加载和-jsonp" class="header-anchor">#</a> 5 Script 异步加载和 JSONP</h2> <p>如何实现 script 异步加载：</p> <ul><li>动态添加 script 标签</li> <li>defer 属性，如果 script 标签设置了该属性，则浏览器会异步的下载该文件并且不会影响到后续 DOM 的渲染； 如果有多个设置了 defer 的 script 标签存在，则会按照顺序执行所有的 script； defer 脚本会在文档渲染完毕后，DOMContentLoaded 事件调用前执行。</li> <li>async 属性：相当于异步回调，加载完后立即执行。它们将在 onload 事件之前完成。</li></ul> <p>介绍一下 JSONP:</p> <p>JSONP: 利用 html 的 script 标签，img 标签，iframe 标签，可以请求第三方的资源（不受同源策略影响）的作用做跨域请求。</p> <ol><li>定义一个回调函数 cb<br>
动态加载一个 script 标签，url 一般是 url?callback=cb</li> <li>服务端会把返回的参数和函数包装起来，以 js 语法的形式返回</li> <li>接受 http 响应，执行回调函数的代码</li></ol> <h2 id="_6-同源策略"><a href="#_6-同源策略" class="header-anchor">#</a> 6 同源策略</h2> <p>同源策略，即拥有相同的协议（protocol），端口（如果指定），主机（域名）的两个页面是属于同一个源。<br>
然而在 IE 中比较特殊，IE 中没有将端口号加入同源的条件中，因此上图中端口不同那一项，在 IE 中是算同源的。<br> <code>&lt;script&gt;</code> <code>&lt;img&gt;</code> <code>&lt;iframe</code>&gt;中的 src，href 都可以任意链接网络资源，是不遵循通源策略的.</p> <h2 id="_7-src-和-href-的区别"><a href="#_7-src-和-href-的区别" class="header-anchor">#</a> 7 src 和 href 的区别</h2> <ul><li>href：Hypertext Reference 的缩写，超文本引用，它指向一些网络资源，建立和当前元素或者说是本文档的链接关系。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.aaa.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>src：source 的缩写，表示的是对资源的引用，它指向的内容会嵌入到当前标签所在的位置。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><em><strong>区别</strong></em></p> <ul><li>src 用于替代这个元素，而 href 用于建立这个标签与外部资源之间的关系。</li> <li>浏览器需要加载完毕 src 的内容才会继续往下走。而遇到 href，页面会并行加载后续内容。</li></ul> <h2 id="_8-你在移动端-h5-开发中遇到了哪些问题"><a href="#_8-你在移动端-h5-开发中遇到了哪些问题" class="header-anchor">#</a> 8 你在移动端 H5 开发中遇到了哪些问题</h2> <h3 id="_8-1-iphonex-的适配"><a href="#_8-1-iphonex-的适配" class="header-anchor">#</a> 8.1 IPhoneX 的适配</h3> <ol><li>适配方案 viewport-fit：</li></ol> <ul><li>auto 默认：viewprot-fit:contain;页面内容显示在 safe area 内</li> <li>cover：viewport-fit:cover,页面内容充满屏幕</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>IOS 还提供了函数 constant、env 和内置变量：</p> <ul><li>safe-area-inset-top</li> <li>safe-area-inset-right</li> <li>safe-area-inset-left</li> <li>safe-area-inset-bottom</li></ul> <p>例如</p> <div class="language- extra-class"><pre class="language-text"><code>buttom: 0
buttom: constant(safe-area-inset-bottom);
buttom:env(safe-area-inset-bottom);

</code></pre></div><ol><li>媒体查询</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">device-width</span><span class="token punctuation">:</span> 375px<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">device-height</span><span class="token punctuation">:</span> 812px<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-device-pixel-ratio</span><span class="token punctuation">:</span> 3<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/* 样式 */</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>小程序</li></ol> <p>可以通过 wx.getSystemInfo 获取设备信息，来动态绑定样式</p> <h3 id="_8-2-ios-键盘问题"><a href="#_8-2-ios-键盘问题" class="header-anchor">#</a> 8.2 ios 键盘问题</h3> <ul><li>iOS12 系统在输入框失去焦点，软键盘关闭后，被撑起的页面无法回退到原来的位置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;input, select&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> scrollHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
 window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>scrollHeight <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>键盘挡住输入框</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 让当前的元素滚动到浏览器窗口的可视区域内。</span>
</code></pre></div><ul><li>ios 无法自动聚焦唤起键盘</li></ul> <p>ios 中唤起键盘必须有用户触发，所以无法直接用 focus，可以由用户触发一个其他事件来使得输入框 focus，从而唤起键盘。</p> <h3 id="_8-3-视频非全屏播放和自动播放"><a href="#_8-3-视频非全屏播放和自动播放" class="header-anchor">#</a> 8.3 视频非全屏播放和自动播放</h3> <p>使用 playsinline webkit-playsinline=&quot;true&quot; 支持非全屏播放视频</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">x5-video-player-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h5<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">controls</span>
  <span class="token attr-name">preload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>auto<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">playsinline</span>
  <span class="token attr-name">webkit-playsinline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">muted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>muted<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">autoplay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>autoplay<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>不是所有的版本都支持自动播放，有些需要静音才能自动播放。一般我会用下面的函数进行辅助。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">initVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isWX<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> video <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>video1
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 非首次渲染</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">palyAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;WeixinJSBridgeReady&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        video<span class="token punctuation">.</span>muted <span class="token operator">=</span> <span class="token boolean">false</span>
        video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        nextMounted <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">palyAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">palyAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> video <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>video1
  <span class="token comment">// 判断是否支持自动播放</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>promise <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 自动播放的新规则 muted=true 可以自动播放</span>
      video<span class="token punctuation">.</span>muted <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// touch时触发视频播放</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.page'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>firstTouch <span class="token operator">&amp;&amp;</span> isIOS<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      video<span class="token punctuation">.</span>muted <span class="token operator">=</span> <span class="token boolean">false</span>
      firstTouch <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nextMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <div data-v-a14a39de></div></div></div></div></div> <div cclass="ag-footer-warp" data-v-1895eed2><div class="ag-footer" data-v-3078f227 data-v-1895eed2><div data-v-3078f227>余 年</div> <div class="supporting" data-v-3078f227>-</div> <div class="supporting" data-v-3078f227>距离2022年还剩下  天</div></div></div></div><div class="global-ui"></div></div>
    <script src="/Agan-blog/assets/js/app.3c2129f2.js" defer></script><script src="/Agan-blog/assets/js/2.0d86c6dd.js" defer></script><script src="/Agan-blog/assets/js/51.947892ad.js" defer></script>
  </body>
</html>
